server:
  port: 8089
  tomcat:
    max-swallow-size: 100MB
    max-http-form-post-size: 100MB

spring:
  application:
    name: gamevault-social

  cloud:
    compatibility-verifier:
      enabled: false
    nacos:
      discovery:
        server-addr: localhost:8848
        namespace: dev
        group: DEFAULT_GROUP
        ip: ${SPRING_CLOUD_NACOS_DISCOVERY_IP:}
      config:
        enabled: false
        import-check:
          enabled: false

  security:
    oauth2:
      resourceserver:
        jwt:
          public-key-location: classpath:certs/rsa-public.pem

  datasource:
    url: jdbc:postgresql://localhost:12000/gamevault_social
    username: gamevault_user
    password: gamevault_pass

  jpa:
    hibernate:
      ddl-auto: update
      naming:
        physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
    show-sql: true

  servlet:
    multipart:
      max-file-size: 100MB
      max-request-size: 100MB
      enabled: true

  data:
    redis:
      host: localhost
      database: 1
      port: 12003
      timeout: 3000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: -1ms

# MinIO 配置
minio:
  endpoint: http://localhost:9000
  public-endpoint: http://localhost:9000
  access-key: minioadmin
  secret-key: minioadmin123
  bucket-name: gamevault-chat
  image-bucket: gamevault-images
  video-bucket: gamevault-videos
  file-bucket: gamevault-files
  audio-bucket: gamevault-audios

# 文件上传配置
file:
  upload:
    temp-path: ${java.io.tmpdir}/gamevault-uploads
    image:
      max-size: 10485760  # 10MB
      allowed-types: jpg,jpeg,png,gif,webp,bmp,svg
      generate-thumbnail: true
      thumbnail-width: 200
      thumbnail-height: 200
    video:
      max-size: 524288000  # 500MB
      allowed-types: mp4,avi,mov,wmv,flv,mkv,webm,m4v
      generate-cover: true
    document:
      max-size: 20971520  # 20MB
      allowed-types: pdf,doc,docx,xls,xlsx,ppt,pptx,txt,zip,rar,7z
    audio:
      max-size: 52428800  # 50MB
      allowed-types: mp3,wav,aac,flac,ogg,m4a,wma
    chunk:
      size: 5242880  # 5MB
      min-file-size: 10485760  # 10MB
      task-expire-hours: 24
    presigned:
      upload-expire-minutes: 60
      download-expire-hours: 24
    quick-upload:
      enabled: true
    concurrent:
      max-uploads-per-user: 5

# 应用配置
app:
  upload:
    path: uploads
    max-file-size: 100MB
    max-request-size: 100MB
  pagination:
    default-page-size: 20
    max-page-size: 100

# Actuator 配置
management:
  endpoints:
    web:
      exposure:
        include: health,info

# 日志配置
logging:
  level:
    com.sg.nusiss.social: DEBUG
    org.springframework.web: INFO
    org.springframework.messaging: DEBUG